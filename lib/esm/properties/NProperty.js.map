{"version":3,"file":"NProperty.js","sources":["../../../src/properties/NProperty.js"],"sourcesContent":["import { BaseProperty } from \"./BaseProperty.js\";\nimport { MissingArgument, InvalidArgument } from \"../errors/index.js\";\n\nexport class NProperty extends BaseProperty {\n  static identifier = \"NProperty\";\n  static prop = \"N\";\n  static cardinality = \"*1\";\n  static acceptableParamTypes = new Set([\n    \"ValueParameter\",\n    \"SortAsParameter\",\n    \"LanguageParameter\",\n    \"AltidParameter\",\n    \"AnyParameter\",\n  ]);\n  static acceptableValTypes = \"SpecialValueType\";\n\n  #params;\n  #value;\n\n  get params() {\n    return this.#params\n      .reduce((parametersArray, currentParameter) => {\n        parametersArray.push(currentParameter.repr());\n        return parametersArray;\n      }, [])\n      .join(\";\");\n  }\n\n  get paramsXML() {\n    return this.#params.reduce(\n      (accumulatedParameters, currentParameter) =>\n        accumulatedParameters + currentParameter.reprXML(),\n      \"\"\n    );\n  }\n\n  get paramsJSON() {\n    return this.#params.reduce(\n      (accumulatedParameters, currentParameter) => ({\n        ...currentParameter.reprJSON(),\n        ...accumulatedParameters,\n      }),\n      {}\n    );\n  }\n\n  get value() {\n    return this.#value.repr();\n  }\n\n  get valueXML() {\n    return this.#value.reprXML();\n  }\n\n  get valueJSON() {\n    return this.#value.reprJSON();\n  }\n\n  #validate(params, value) {\n    if (typeof params === \"undefined\" || typeof value === \"undefined\")\n      throw new MissingArgument(\n        \"Parameters and value for NProperty must be supplied\"\n      );\n    else if (!Array.isArray(params))\n      throw new InvalidArgument(\n        \"Parameters for NProperty must be passed in an array\"\n      );\n\n    const parameterInstanceCount = new Set();\n\n    if (\n      !params.every((param) => {\n        if (param.constructor.identifier !== \"AnyParameter\") {\n          if (parameterInstanceCount.has(param.constructor.identifier))\n            throw new InvalidArgument(\n              \"Parameters must not have more than one instance supplied\"\n            );\n          else parameterInstanceCount.add(param.constructor.identifier);\n        } else {\n          if (parameterInstanceCount.has(param.param))\n            throw new InvalidArgument(\n              \"Parameters must not have more than one instance supplied\"\n            );\n          else parameterInstanceCount.add(param.param);\n        }\n\n        if (param.constructor.identifier === \"ValueParameter\")\n          return param.value === \"text\";\n\n        return this.constructor.acceptableParamTypes.has(\n          param.constructor.identifier\n        );\n      })\n    )\n      throw new TypeError(\n        \"Some of the parameters passed are not valid parameters for NProperty\"\n      );\n    else if (\n      value.constructor.identifier !== this.constructor.acceptableValTypes ||\n      !/^NProperty$/i.test(value.targetProp)\n    )\n      throw new TypeError(\"Invalid type for value of NProperty\");\n  }\n\n  constructor(params, val) {\n    super();\n\n    this.#validate(params, val);\n    this.#params = params;\n    this.#value = val;\n\n    this.checkAbstractPropertiesAndMethods();\n    Object.freeze(this);\n  }\n}\n\nObject.freeze(NProperty);\n"],"names":["NProperty","params","val","checkAbstractPropertiesAndMethods","Object","freeze","reduce","parametersArray","currentParameter","push","repr","join","accumulatedParameters","reprXML","_objectSpread","reprJSON","BaseProperty","value","MissingArgument","Array","isArray","InvalidArgument","parameterInstanceCount","Set","every","param","constructor","identifier","has","add","acceptableParamTypes","TypeError","acceptableValTypes","test","targetProp"],"mappings":"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"}