{"version":3,"file":"TzProperty.js","sources":["../../../src/properties/TzProperty.js"],"sourcesContent":["import { BaseProperty } from \"./BaseProperty.js\";\nimport { MissingArgument, InvalidArgument } from \"../errors/index.js\";\n\nexport class TzProperty extends BaseProperty {\n  static identifier = \"TzProperty\";\n  static prop = \"TZ\";\n  static cardinality = \"*\";\n  static acceptableParamTypes = new Set([\n    \"ValueParameter\",\n    \"AltidParameter\",\n    \"PIDParameter\",\n    \"PrefParameter\",\n    \"IndexParameter\",\n    \"TypeParameter\",\n    \"MediatypeParameter\",\n    \"AnyParameter\",\n  ]);\n  static acceptableValTypes = new Set([\"TextType\", \"URIType\", \"DateTimeType\"]);\n\n  #params;\n  #value;\n\n  get params() {\n    return this.#params\n      .reduce((parametersArray, currentParameter) => {\n        parametersArray.push(currentParameter.repr());\n        return parametersArray;\n      }, [])\n      .join(\";\");\n  }\n\n  get paramsXML() {\n    return this.#params.reduce(\n      (accumulatedParameters, currentParameter) =>\n        accumulatedParameters + currentParameter.reprXML(),\n      \"\"\n    );\n  }\n\n  get paramsJSON() {\n    return this.#params.reduce(\n      (accumulatedParameters, currentParameter) => ({\n        ...currentParameter.reprJSON(),\n        ...accumulatedParameters,\n      }),\n      {}\n    );\n  }\n\n  get value() {\n    return this.#value.repr();\n  }\n\n  get valueXML() {\n    return this.#value.reprXML();\n  }\n\n  get valueJSON() {\n    return this.#value.reprJSON();\n  }\n\n  #validate(params, value) {\n    if (typeof params === \"undefined\" || typeof value === \"undefined\")\n      throw new MissingArgument(\n        \"Parameters and value for TzProperty must be supplied\"\n      );\n    else if (!Array.isArray(params))\n      throw new InvalidArgument(\n        \"Parameters for TzProperty must be passed in an array\"\n      );\n\n    const parameterInstanceCount = new Set();\n\n    if (\n      !params.every((param) => {\n        if (param.constructor.identifier !== \"AnyParameter\") {\n          if (parameterInstanceCount.has(param.constructor.identifier))\n            throw new InvalidArgument(\n              \"Parameters must not have more than one instance supplied\"\n            );\n          else parameterInstanceCount.add(param.constructor.identifier);\n        } else {\n          if (parameterInstanceCount.has(param.param))\n            throw new InvalidArgument(\n              \"Parameters must not have more than one instance supplied\"\n            );\n          else parameterInstanceCount.add(param.param);\n        }\n\n        if (param.constructor.identifier === \"TypeParameter\")\n          return !/^(?:Related|Tel)Property$/i.test(param.targetProp);\n        else if (param.constructor.identifier === \"ValueParameter\")\n          return (\n            (param.value === \"text\" &&\n              value.constructor.identifier === \"TextType\") ||\n            (param.value === \"uri\" &&\n              value.constructor.identifier === \"URIType\") ||\n            (param.value === \"utc-offset\" &&\n              value.constructor.identifier === \"DateTimeType\")\n          );\n\n        return this.constructor.acceptableParamTypes.has(\n          param.constructor.identifier\n        );\n      })\n    )\n      throw new TypeError(\n        \"Some of the parameters passed are not valid parameters for TzProperty\"\n      );\n    else if (\n      !this.constructor.acceptableValTypes.has(value.constructor.identifier) ||\n      (value.constructor.identifier === \"DateTimeType\" &&\n        value.type !== \"UTC-OFFSET\")\n    )\n      throw new TypeError(\"Invalid type for value of TzProperty\");\n  }\n\n  constructor(params, val) {\n    super();\n\n    this.#validate(params, val);\n    this.#params = params;\n    this.#value = val;\n\n    this.checkAbstractPropertiesAndMethods();\n    Object.freeze(this);\n  }\n}\n\nObject.freeze(TzProperty);\n"],"names":["TzProperty","params","val","checkAbstractPropertiesAndMethods","Object","freeze","reduce","parametersArray","currentParameter","push","repr","join","accumulatedParameters","reprXML","_objectSpread","reprJSON","BaseProperty","value","MissingArgument","Array","isArray","InvalidArgument","parameterInstanceCount","Set","every","param","constructor","identifier","has","add","test","targetProp","acceptableParamTypes","TypeError","acceptableValTypes","type"],"mappings":"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"}