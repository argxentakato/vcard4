{"version":3,"file":"BaseParameter.js","sources":["../../../src/parameters/BaseParameter.js"],"sourcesContent":["export class BaseParameter {\n  #abstractPropertiesAndMethods = [\n    \"param\",\n    \"value\",\n    \"valueXML\",\n    \"valueJSON\",\n    \"identifier\",\n  ];\n\n  checkAbstractPropertiesAndMethods() {\n    if (\n      !this.#abstractPropertiesAndMethods.every(\n        (abstractPropertyOrMethod) =>\n          Object.prototype.hasOwnProperty.call(\n            this,\n            abstractPropertyOrMethod\n          ) ||\n          Object.prototype.hasOwnProperty.call(\n            Object.getPrototypeOf(this),\n            abstractPropertyOrMethod\n          ) ||\n          Object.prototype.hasOwnProperty.call(\n            this.constructor,\n            abstractPropertyOrMethod\n          )\n      )\n    )\n      throw new Error(\n        \"All abstract properties and methods in abstract base class must be defined in child class\"\n      );\n  }\n\n  repr() {\n    return `${this.constructor.param || this.param}=${this.value}`;\n  }\n\n  reprXML() {\n    const tag =\n      this.constructor.param?.toLowerCase() || this.param?.toLowerCase();\n\n    const knownTagRegExp =\n      /^(?:altid|base|calscale|cc|geo|index|label|language|level|mediatype|pid|pref|sort-as|type|tz|value|x-[A-Za-z0-9]+)$/;\n\n    if (!knownTagRegExp.test(tag))\n      return `<unknown>${this.valueXML\n        .replace(/<[a-z\\-]+?>/g, \"<text>\")\n        .replace(/<\\/[a-z\\-]+?>/g, \"</text>\")}</unknown>`;\n    else if (tag === \"value\") return \"\";\n\n    return `<${tag}>${this.valueXML}</${tag}>`;\n  }\n\n  reprJSON() {\n    const key =\n      this.constructor.param?.toLowerCase() || this.param?.toLowerCase();\n\n    if (key === \"value\") return {};\n\n    let value = this.valueJSON;\n    value.shift();\n    value = value.map((val) => val.toString());\n\n    if (value.length === 1) value = value.pop();\n\n    return { [key]: value };\n  }\n\n  constructor() {\n    if (this.constructor === BaseParameter)\n      throw new Error(\"Cannot create instance of base class\");\n  }\n}\n\nObject.freeze(BaseParameter);\n"],"names":["BaseParameter","constructor","Error","every","abstractPropertyOrMethod","Object","prototype","hasOwnProperty","call","getPrototypeOf","param","value","tag","toLowerCase","knownTagRegExp","test","valueXML","replace","key","valueJSON","shift","map","val","toString","length","pop","freeze"],"mappings":"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"}